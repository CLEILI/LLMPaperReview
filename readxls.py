import pandas as pd
from setenvrion import xls_dir
import difflib,os,random

def ele_similar(str1,str2):
    threshold=0.8
    similarity = difflib.SequenceMatcher(None, str1, str2).ratio()
    return similarity>=threshold

def similarity(finalpdfs):

    df = pd.read_excel(f'{xls_dir}/WASAPaperList.xls',usecols=[1])
    # 打印DataFrame
    acceptpdfs=[]
    #print(df)
    #print(df.values[2,0])
    for i in range(2,116):
        acceptpdfs.append(df.values[i,0].replace(':',''))
    
    commonpdfs = []
    for str1 in acceptpdfs:
        for str2 in finalpdfs:
            if ele_similar(str1,str2):
                commonpdfs.append(str1)
                print(1)
                print(str1)
                print(str2)
    #print(acceptpdfs)
    #commonpdfs=[pdf for pdf in acceptpdfs if pdf in finalpdfs]

    return round(float(len(commonpdfs)/len(acceptpdfs)),4)
def similartest(finalpdf,path):
    pdfs=[]
    pdfs_path=path
    for filename in os.listdir(pdfs_path):#read all pdf names
        if filename.endswith('.pdf'):
            new_filename,_ = os.path.splitext(filename)
            pdfs.append(new_filename)
    rand=random.sample(pdfs,114)
    commonpdfs = []
    for str1 in rand:
        for str2 in finalpdf:
            if ele_similar(str1,str2):
                commonpdfs.append(str1)
                print(1)
                print(str1)
                print(str2)

    return round(float(len(commonpdfs)/len(rand)),4)
def test():
    finalstr='''
SmoothGame Low Bitrate Spikes Cloud Gaming via Intelligent Frame Enhancement#Enhancing Emergency Communications via UAV-Assisted Home-Independent Broadband Mobile Networks#FedDAGC Dynamic Adaptive Graph Coarsening for Federated Learning on Non-IID Graphs#REHG A RECOMMENDER ENGINE BASED ON HETEROGENEOUS GRAPH#3DCLMPP A Molecular Property Prediction Model Based on Joint Loss and 3D-3D Contrastive Learning#Pruning based Retraining Acceleration Method for Edge Scenarios in Autonomous Driving#CIOC Class Incremental Learning for 3D LIDAR Point Cloud Semantic Segmentation#A Provably Secure and Efficient One-to-many Authentication and Key Agreement Protocol for Asymmetric Intelligent Environments#The Client-level GAN-based Data Reconstruction Attack and Defense in Clustered Federated Learning#Data-Driven Vehicle Positioning with Smartphone Raw GNSS Data in Urban Areas#Pleno-Sense An Adaptive Switching Algorithm towards Enhancing Robustness in Respiration Monitoring Across Diverse Motion Scenarios#FEKNN A Wi-Fi Indoor Localization Method Based on Feature Enhancement and KNN#Trustworthy and incentivized federated learning based on blockchain#Efficient Online Path Selection and Workload Allocation for In-network Computing in MEC#SpiderMan Towards Automated Attack Detection by Behavior Pattern Learning#Cyber Sentinel Fortifying Voice Assistant Security with Biometric Template Integration in Neural Networks#IDMFCrack Integrating Disparity Map Features for Accurate Crack Detection#FedMQ Multi-grained Quantization for Heterogeneous Federated Learning#Client-Oriented Training Energy Consumption Optimization Algorithm in Clustered Federated Learning with Model Partition#E-SAGE Explainability-based Defense Against Backdoor Attacks on Graph Neural Networks#AdMarks Image Steganography Based on Adversarial Perturbation#Defense Strategy in Federated Learning Unveiling Stealthy Threats and the Similarity Filter Solution#Weighted Worst-Case Reliability Maximization of IRS-Assisted URLLC Systems under Delay Constraints#NRetransmit Keystream Reuse Attack Based on 5G NAS Layer Vulnerabilities#UG-STNN A Spatial-Temporal Neural Network Based on Unsupervised Graph Representation Module for Traffic Flow Prediction#Sparse Contrastive Self-Distillation for RGB-D Salient Object Detection#ReSU-Net State Space Model for 3D Abdominal Multi-organ Segmentation#CO-LEACH Cooperative Data Collection Protocol for Data-Heterogeneous WSNs#SAE-CNN A Spatial Attention Augmented Convolutional Neural Network for Service Type Identification in 5G Heterogeneous Networks#NA-net Fusing Geometric Structure for 3D Point Cloud Semantic Segmentation#V2ICooper Toward Vehicle-to-Infrastructure Cooperative Perception with Spatiotemporal Asynchronous Fusion#Fast Steganalysis of VoIP Streams Using Temporal Convolutional Networks and Multi-Head Attention#Fast Adaptive Caching Algorithm for Mobile Edge Networks Based on Meta-Reinforcement Learning#Layer-Aware Microservice Deployment for Edge Computing with Service Reliability Provisioning#An optimal control method for blocking rumors in social networks#DSBA Dynamic Sharded Blockchain Architecture for Industrial Emergency Data Sharing#3D Physical Layer Secure Transmission for UAV-assisted Mobile Communications without locations of Eavesdroppers#Sophon IDS Mitigating the Effectiveness of GAN-based Adversarial Attacks via Tailored Misinformation#Anti-Packet-Loss Encrypted Traffic Classification via Masked Autoencoder#Deep Reinforcement Learning based Economic Dispatch with Cost Constraint in Cyber Physical Energy System#DGAT-net Dynamic Graph Attention for 3D Point Cloud Semantic Segmentation#A Confidential Batch Payment Scheme with Integrated Auditing for Enhanced Data Trading Security#An Adaptive Model Difference Clipping Method for Differentially Private Federated Learning#Federated Learning for Edge Heterogeneous Object Detection Algorithm#A Taxi Flow Prediction Model Based on Spatial-Temporal Data Fusion Network#Generative Model-Based Edge-Assisted Object Detection in Bandwidth-Constrained Network#Left Ventricular Hypertrophy Detection Algorithm Using Feature Selection and CNN-LSTM#Research on Accurate Prediction Method of Epilepsy Stage Based on Gradient Boosting Algorithm#eWiDASH eBPF-based bitrate adaptation for DASH video streaming in Wi-Fi networks#DeepTSTM A Deep Tree Spatial-Temporal Model Based on Discrete Wavelet Transform for Traffic Flow Prediction#A Method for Abnormal Detection and Poisoned Data Recovery in Clustered Federated Learning#Edge Heterogeneous Temporal Tree Convolutional Networks for Traffic Flow Prediction#Active defense simulation evaluation of industrial control systems based on attack-defense graph#Fusion of Multi-Stream Convolution and Bidirectional Gated Recurrent Network for Surface Electromyographic Gesture Recognition#Anomaly Detection under Normality-Shifted IoT Scenario Filter, Detection, and Adaption#Detecting Computer Memory Behaviours by Exploiting Electromagnetic Emanations#Inferring the Number of Clusters for Radar Emitters via Threshold Segmentation and Information Fusion#Scaling Blockchain Based on Sim-hashgraph Sharding Two-layer Consensus Under High Concurrent Carbon Trading#OLSR Protocol Optimization for Dynamic UAV Networks in Frequency-Sweeping Jamming Scenarios#LV-auth Lip Motion Fusion for Voiceprint Authentication#MICABAC Multidimensional Industrial Control Attribute-Based Access Control Model#Multi-view Fusion Human Posture Regression Method Based on Deep Supervision Using Radar#A Residual Graph Neural Network Algorithm Based on Unfolded WMMSE for Power Allocation#Optimization of Energy Efficiency in Hierarchical Federated Learning Based on NOMA and Aircomp#FedDCT A Dynamic Cross-Tier Federated Learning Framework in Wireless Networks#Range Query with the existence of Missing Tags for Large-Scale RFID Systems#A Novel Merging Framework for Homogeneous and Heterogeneous Blockchain Systems#A Cluster-based Platoon Formation Scheme for Realistic Automated Vehicle Platooning#Multi-User VR Content Delivery using Adaptive Broadcasting#A Novel Tucker Decomposition Driven Taxi Travel Demand Forecasting Algorithm#Wireless Network Fault Diagnosis Based on Tree Path Convolutional Networks#MPAM Dual-Transformer for Millimeter-Wave Sensing Based Multi-person Activity Monitoring System#A Flexible Numerology Resource Allocation to Guarantee Delay and Reliability Requirements in 5G NR-V2X Networks#Task-aware Power Allocation with Efficient Temporal Charging Scheduling#Dynamic Staleness Control for Asynchronous Federated Learning in Decentralized Topology#S-AC Opportunistic Routing Algorithm Based on Social Trust Degree in Social Networks#Low-cost Robot Path Planning Mechanism for Escaping from Dead Ends#Real-time remote monitoring video information ring confusion and bit diffusion algorithm#Secure Multiparty Set Operation Protocols with Set Encoding and Homomorphic Encryption#Dynamic Edge-Server Placement Strategy with Improved Snake Optimization Algorithm#QoS-Constrained, Reliable and Energy-Efficient Task Deployment in Cloud Computing#Arabic Sentiment Analysis of Consumer Reviews Machine Learning and Deep Learning Methods Based on NLP for Content Evaluation#Task Offloading in Vehicular Networks under Complex Interference Environments#A Co-optimization Deployment Framework for Multi-Tenant Distributed Machine Learning#Optimal Channel Allocation based on Channel Hopping Sequence#Eﬃcient Semi-Trusted-Server Privacy-Preserving Implicit Authentication for Internet of Vehicles#Enhancing Generalized Zero-shot Learning with Dynamic Selective Knowledge Distillation#Efficient and Verifiable Privacy-Preserving Aggregation Scheme for IoT-based Federated Learning#Meta-RFF Few-Shot Open-Set Incremental Learning for RF Fingerprint Recognition via Multi-phase Meta Task Adaptation#Latency Optimization in UAV-assisted Mobile Edge Computing Empowered by Caching Mechanisms#ZigRa Physical-layer Cross-Technology Communication from ZigBee to LoRa#Federated Learning Framework with Local Random Differential Privacy#FedDue Optimizing Personalized Federated Learning through Dynamic Update Classifier#Feature Selection and Opt-Forest Ensemble Model based Network Intrusion Detection#On the Security of NDN’s Privacy Access Control Framework#Deep Reinforcement Learning and Multi-Head Attention-Based Task Offloading in C-V2X Networks#TBA-GNN A Traffic Behavior Analysis Model with Graph Neural Networks for Malicious Traffic Detection#Efficient On-Device Training for Lightweight Fall Detection#An Interpretation Method for Provenance-based Intrusion Detection Based on GNNExplainer#A Message Routing Algorithm Based on the Importance of Node Social Relationships in Opportunistic Mobile Social Networks#Secure and stable DDoS attack real-time detection algorithm based on federation learning and blockchain#Hybrid Heterogeneous Wireless Chargers Placement#Consistent Low-latency Scheduling for Microsecond-Scale Tasks in Data Centers#A Novel control method for misinformation diﬀusion in mobile opportunistic networks#Secure Transmission Over Wireless Multiple Access Wiretap Channels by Constellation Rotation and Superposition#Enhancing Network Performance Measurement Through Orchestration#Improved Proximal Policy Optimization Algorithm for Controller Design in Hybrid UAVs#Federated Learning Scheme Based on Simulated Annealing and Gaussian Disturbed Particle Swarm#More Efficient Multi-Party Private Set Intersection Construction with Large Multiple Participants#A Malicious Cluster Entry Method for Clustered Federated Learning#DevDet Detecting IoT Device Impersonation Attacks via Traffic Based Identification#Secure Motion Verification for High Altitude Platforms with a Hybrid AOA-TDOA-FDOA Scheme#A Cloud-Edge Integrated Water Body Extraction Using Superpixel Segmentation#Remorabook Privacy-Preserving Mobile Social Networking Based on Remora Computing#Deterministic Edge Data Center Network Performance Analysis#Toward Low Overhead and Real-time Multi-vehicle Collaborative Perception via V2V Communication#Self-Supervised Multi-View Clustering Guided by Multi-Angle Semantic Labels#Enhancing Adversarial Robustness in Automatic Modulation Recognition with Dynamical Systems-Inspired Deep Learning Frameworks#Multiscale Adversarial Domain Adaptation Approach for Cloud-Edge Collaborative Fault Diagnosis of Industrial Equipment#Early Detection of Cerebrovascular Patients with Cognitive Impairment using EEG Signal#A High-precision Generality Method for Chinese Nested Named Entity Recognition#OCF-HP An Offline Compaction Framework based on Hotspot Prediction for Data Lakehouse#A DRL-Based Hierarchical Game for Physical Layer Security Aware Cooperative Communications#FedScale A Federated Unlearning Method Mimicking Human Forgetting Processes#Spatial-Temporal Interval Aware Graph Neural Network for Next POI Recommendation#A Robust Two-factor Medical Sensor Authentication Protocol Based On PUF#Joint Routing-Optimized Time-Sensitive Traffic Scheduler in VR Battle#Truthful Double Auction-Based Resource Allocation Mechanisms for Latency-Sensitive Applications in Edge Clouds#AST-PG Attention Based Spatial-Temporal Point-of-Interest Groups Model for Real-Time Point-of-Interest Recommendation#Quantifying Transmission Performance for Large scale Wireless Communication Networks#Enhancing 360-Degree Video Streaming A Spectral Clustering-Based Multicast System Assisted by MEC#S-TSG Description Model of Transient Execution Attacks in Intel SGX#Multi-agent Deep Reinforcement Learning-based UAV-enable Two Time-scale NOMA Communication Networks Optimization#A Green Computing Approach for IoT Traffic Identification based on Status Graphs#An Efficient Fault-Tolerant Communication Scheme in 3-ary n-cube Networks Final#A Novel Scoring Algorithm against HID Attacks Based on Static Text Feature Matching#Fatigue Detection Method Based on Multi-Branch Graph Network#Graph Transformer Hawkes Processes for Causal Structure learning in Telecom Networks#Proximal Policy Optimization Algorithm Based Carbon Emission Reduction Strategy in the Internet of Energy#Towards Flexible and Reliable Sentiment Analysis Based on Large Language Models#Multi-dimensional Top-k Similarity Joins Algorithm in Wireless Social Networks#Personalised Federated Learning Based on Hierarchical Aggregation of Multi-Head Attention#ID-Gait Fine-grained Human Gait State Recognition using Wi-Fi Signal#DS-TFP A Distriuted and Secure Traffic Flow Prediction Framework Based on Federated Graph Learning#An Online Auction Approach for Distributed AIGC Model Allocation in Edge Networks#CoR-FHD Communication-Efficient and Robust Federated Hyperdimensional Computing for Activity Recognition#QoS-aware Energy-Efficient Multi-UAV Offloading Ratio and Trajectory Control Algorithm in Mobile Edge Computing#Instantaneous frequency fitting algorithm for high-resolution fractional time-frequency representation#Joint Client Selection and Bandwidth Allocation in Federated Edge Learning Based on Long-Term Data-Quality Assessment#Privacy-preserving Federated Learning Framework with Resisting Source Inference Attacks in Smart Healthcare#Defending Against Poisoning Attacks in Federated Prototype Learning on Non-IID Data#Indoor Localization with Cross-Dimension Consecutive Geomagnetic Sequences#Mobile Crowdsourcing Task Assignment Algorithm Based on ConvNeXt and GRU#Tree of Thought Prompt in Robotic Arm Control#Distributed Dynamic Virtual Network Embedding in Container Networks#Clustering Routing based on Improved Thermal Exchange Optimization Algorithm#BehaMiner System Behavior Mining for Audit Log based on graph learning#Fair and Communication Efficient Personalized Federated Learning#WOLFE WIFI BASED OBJECT RECOGNITION FRAMEWORK USING MULTIPLE FEATURES#A DRL-Based Edge Intelligent Servo Control with Semi-Closed-Loop Feedbacks in Industrial IoT#A Green and Eﬃcient Method For Evaluating IoT System Reliability with Dependent Evidence Fusion#Byzantine-Robust Federated Learning Based on Blockchain#Towards Communication-Efficient Collaborative Perception Harnessing Channel-Spatial Attention and Knowledge Distillation#Human activity recognition using Attention-augmented Spatio-temporal hybrid model with radar sensors#Proof of Run A Fair and Sustainable Blockchain Consensus Protocol based on Game Theory in DApps#Resource-Constrained On-Device DNN Model Training Via Offloading And Recomputation#Accelerated Federated Learning Led by Bat Algorithm#Weight Redundancy Based Neural Network Pruning in SIoT Resource Allocation#KD-Eye Lightweight Pupil Segmentation for Eye Tracking on VR Headsets via Knowledge Distillation#MineLoRa Markov Transition Fields and Adaptive Neural Networks for LoRa Device Radio Frequency Fingerprint Identification#Federated Learning Based on Dynamic Gradient Compression Strategy#An Improved Moth Flame Search for WSN Coverage Optimization#Probabilistic Offloading Algorithm for Opportunistic Networks Integrating Node Influence Prediction#FEAttack A Fast and Efficient Hard-Label Textual Attack Framework#
'''
#2 out of 5, change 
#0.6 0.6 similarity of first round
    pdfs=finalstr.split('#')[:-1]
    print(similarity(pdfs))
#0.66 0.67 0.68 0.65
    print(similartest(pdfs,'./paper_pdfs copy'))
#0.58 0.57 0.56 0.60 0.59 0.54 0.63 0.66 0.61 0.59 0.69 0.58 0.54 for 5workload 3randomround temperature=0
# 5 3 1: 0.55 0.61 0.57 0.61 0.52 0.61 0.58 0.59 0.60
# 5 1 1: 0.59 0.57 0.60 0.54 0.65 0.62 0.57 0.59 0.61
#        0.63 0.75 0.74 0.70 0.66
#test()
